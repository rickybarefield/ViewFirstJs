// Generated by CoffeeScript 1.3.3

/*

  TODO not keen on this class as adding to basic type prototypes means you
  TODO could never have two ViewFirsts initialised, although I don't particularly
  TODO see the point in having two, it could lead to really hard to find bugs
*/


(function() {
  var moment;

  moment = require("./moment");

  module.exports = function(viewFirst) {
    String._viewFirstConvert = function(value) {
      if (typeof value === "string" || value instanceof String) {
        return value;
      } else {
        return value.toString();
      }
    };
    String.prototype._viewFirstToString = function() {
      return this.toString();
    };
    Number._viewFirstConvert = function(value) {
      if (typeof value === "number" || value instanceof Number) {
        return value;
      } else if (typeof value === "string" || value instanceof String) {
        return parseFloat(value);
      } else {
        throw "Unable to convert " + value + " to a number";
      }
    };
    Number.prototype._viewFirstToString = function() {
      return this.toString();
    };
    Date._viewFirstConvert = function(value) {
      if (value instanceof Date) {
        return value;
      } else if (typeof value === "number" || value instanceof Number) {
        return new Date(value);
      } else if (typeof value === "string" || value instanceof String) {
        return moment(value, viewFirst.dateFormat).toDate();
      } else {
        throw "Unable to convert " + value + " to a Date";
      }
    };
    return Date.prototype._viewFirstToString = function() {
      return moment(this).format(viewFirst.dateFormat);
    };
  };

}).call(this);
